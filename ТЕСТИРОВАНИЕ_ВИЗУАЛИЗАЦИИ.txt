================================================================================
ПОШАГОВОЕ ТЕСТИРОВАНИЕ 3D ВИЗУАЛИЗАЦИИ
================================================================================

ПРОБЛЕМА ИСПРАВЛЕНА:
--------------------
✅ Добавлен экспорт функций и переменных в window (app.js:87-105)
   Теперь app_patch.js может обращаться к scene, camera, renderer и функциям

ТЕСТЫ ДЛЯ ЗАПУСКА (ПО ПОРЯДКУ):
--------------------------------

ТЕСТ 1: Базовый 3D тест
========================
URL: http://127.0.0.1:8000/static/test_visualization.html

ЧТО ДОЛЖНО БЫТЬ:
- Статус-панель слева вверху
- Зелёные галочки ✓ для всех шагов
- КРАСНЫЙ КУБИК в центре экрана
- Вращение мышью работает

ЕСЛИ НЕТ:
- Откройте консоль браузера (F12) и посмотрите ошибки
- Скриншот консоли пришлите


ТЕСТ 2: Полный функциональный тест
===================================
URL: http://127.0.0.1:8000/static/test_full_flow.html

ПОРЯДОК ДЕЙСТВИЙ:

1. Нажмите "1. Test Basic 3D"
   Должен появиться КРАСНЫЙ КУБИК
   Статус: "✓ Basic 3D test PASSED"

2. Нажмите "2. Test API"
   Должно появиться:
   - ✓ API test PASSED
   - Items: XX
   - Utilization: XX%

3. Нажмите "3. Test Full Visualization"
   Должно появиться:
   - ЦВЕТНЫЕ КУБИКИ (красные, зелёные, синие)
   - Вращение мышью работает
   - Слайдер прозрачности работает
   - Статус: "✓ FULL TEST PASSED!"

ЕСЛИ ТЕСТ 3 НЕ РАБОТАЕТ:
- Откройте консоль (F12)
- Посмотрите есть ли ошибки JavaScript
- Сделайте скриншот


ТЕСТ 3: Основной фронтенд
==========================
URL: http://127.0.0.1:8000/

ПОРЯДОК ДЕЙСТВИЙ:

1. Откройте страницу
2. Должны видеть:
   - Левая панель с настройками
   - Правая панель с пустым canvas (серый фон)
   - Слайдер прозрачности справа вверху

3. Нажмите кнопку "Сгенерировать"

4. ДОЛЖНО ПОЯВИТЬСЯ:
   - 3D модель с деталями
   - Цветные кубики (каждый ID - свой цвет)
   - Чёрные рамки вокруг деталей
   - Статистика заполнения слева
   - Карта раскроя внизу

5. ПРОВЕРЬТЕ ИНТЕРАКТИВНОСТЬ:
   - Зажмите левую кнопку мыши → двигайте → модель вращается
   - Покрутите колесо мыши → zoom работает
   - Двигайте слайдер прозрачности → детали становятся прозрачнее

ЕСЛИ НЕ ВИДНО 3D МОДЕЛЬ:
-------------------------

A. Откройте консоль браузера (F12 → вкладка Console)

B. Посмотрите есть ли ошибки (красный текст)

C. Проверьте в консоли:
   - Напишите: window.scene
   - Должно показать: Scene {...}

   - Напишите: window.camera
   - Должно показать: PerspectiveCamera {...}

   - Напишите: window.addBox
   - Должно показать: ƒ addBox(...)

D. Если window.scene = undefined:
   - Значит app.js не загрузился
   - Проверьте в Network (вкладка Network в F12)
   - Есть ли запросы к /static/app.js
   - Какой статус? (должен быть 200)

E. Если есть ошибка "Cannot read property 'scene' of undefined":
   - Значит app_patch.js загружается раньше app.js
   - Это нормально - мы добавили setTimeout(initPatch, 100)

ЧАСТЫЕ ПРОБЛЕМЫ:
-----------------

1. "Пустой экран" → Проверьте что canvas есть
   document.getElementById('canvas') должен вернуть элемент

2. "Серый экран без деталей" → API не вернул данные
   Проверьте Network → вкладка XHR → есть ли запрос /optimize
   Посмотрите Response

3. "Детали есть но не вращаются" → OrbitControls не работают
   В консоли напишите: window.controls.enabled
   Должно быть: true

4. "Прозрачность не работает" → Слайдер не подключен
   Проверьте что document.getElementById('opacity-slider') существует

ЛОГИ ДЛЯ ОТПРАВКИ:
------------------

Если ничего не работает, отправьте:

1. Скриншот экрана с открытой консолью (F12)
2. Текст всех ошибок из консоли (красный текст)
3. Во вкладке Network → запрос /optimize → Response → скопируйте JSON

================================================================================
