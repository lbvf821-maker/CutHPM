@echo off
echo ================================================================================
echo ЗАПУСК СЕРВЕРА С НОВЫМ КОДОМ
echo ================================================================================
echo.

REM Убить все процессы Python
echo 1. Остановка старых процессов...
taskkill /F /IM python.exe >nul 2>&1
timeout /t 2 /nobreak >nul

REM Удалить кэш
echo 2. Очистка кэша...
for /d /r . %%d in (__pycache__) do @if exist "%%d" rd /s /q "%%d" 2>nul

echo 3. Запуск сервера на порту 8000...
echo.
echo ================================================================================
echo URL: http://127.0.0.1:8000
echo ================================================================================
echo.

REM Запустить сервер
python -B -m uvicorn api:app --host 127.0.0.1 --port 8000 --reload

pause
